<div class="row">
	<div class="col-md-3"
	
	<!--the next line of code show the image to appear on top of page -->
	
	<%= image_tag @restaurant.image_url %>

	<h2>
	  
	  <%= @restaurant.name %>
	</h2>

	<div class="star-rating" data-score= <%= @avg_rating %> ></div>
	<p><%= "#{@reviews.length} reviews" %></p>

	<p>
	  <strong>Address:</strong>
	  <%= @restaurant.address %>
	</p>

	<p>
	  <strong>Phone:</strong>
	  <%= @restaurant.phone %>
	</p>

	<p>
	  <strong>Website:</strong>
	  <%= link_to @restaurant.website, @restaurant.website %>
	</p>

	<%= link_to "Write a Review", new_restaurant_review_path(@restaurant), class: "btn btn-primary" %>
	
</div>

<div class="col-md-9">
	<% if @reviews.blank? %>
	  <h3>No Reviews Yet. Be the first to write one!</h3>
	<!-- This code cycles through each of the reviews and for each review, it displays the reviewâ€™s rating as well as its comment in <p> tags.-->
		<% else %>
		
		<table class="table">
		    <tbody>
				<% @reviews.each do |review| %>
				<tr>
					<td>
			  		  <div class="star-rating" data-score= <%= review.rating %> ></div>
			  		  
					  <!--replace review.comment with h(review.comment).gsub(/\n/, '<br/>').html_safe. Here, gsub replaces any new line characters, which we see as breaks between paragraphs, into <br> tags. The h and .html_safe at the end are used to help our app display text as html.-->
					  
					  <p><%= h(review.comment).gsub(/\n/, '<br/>').html_safe %></p>
				  </td>
			  	</tr>
			<% end %>
		    </tbody>
		</table>
	<% end %>
 </div>
</div>

<%= link_to 'Edit', edit_restaurant_path(@restaurant), class: "btn btn-link" %> |
<%= link_to 'Back', restaurants_path, class: "btn btn-link" %>

<!--jquery-->
<script>
$('.star-rating').raty({
	path: 'https://s3-eu-west-1.amazonaws.com/businessreview/Rating+Stars',
	readOnly: true, 
	score: function() {
	    return $(this).attr('data-score');
	  }
});
</script>